import { Pipe } from '@angular/core';
export class TimeAgoPipe {
    /**
     * @param inputDate: Date | Moment - not included as TypeScript interface,
     * in order to keep `ngx-pipes` "pure" from dependencies!
     */
    transform(inputDate) {
        if (!inputDate || (!inputDate.getTime && !inputDate.toDate)) {
            return 'Invalid date';
        }
        const past = inputDate.toDate ? inputDate.toDate() : inputDate.getTime();
        const now = +new Date();
        if (past > now) {
            return 'in the future';
        }
        for (let i = 0, l = TimeAgoPipe.MAPPER.length, ms = now - past, div = TimeAgoPipe.YEAR_MS; i < l; ++i) {
            const elm = TimeAgoPipe.MAPPER[i];
            const unit = Math.floor(ms / (div /= elm.div));
            if (unit >= 1) {
                return unit === 1 ? elm.single : `${unit} ${elm.many} ago`;
            }
        }
        return 'just now';
    }
}
TimeAgoPipe.YEAR_MS = 1000 * 60 * 60 * 24 * 7 * 4 * 12;
TimeAgoPipe.MAPPER = [
    { single: 'last year', many: 'years', div: 1 },
    { single: 'last month', many: 'months', div: 12 },
    { single: 'last week', many: 'weeks', div: 4 },
    { single: 'yesterday', many: 'days', div: 7 },
    { single: 'an hour ago', many: 'hours', div: 24 },
    { single: 'just now', many: 'minutes', div: 60 },
];
TimeAgoPipe.decorators = [
    { type: Pipe, args: [{ name: 'timeAgo' },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGltZS1hZ28uanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9zcmMvbmctcGlwZXMvcGlwZXMvZGF0ZS90aW1lLWFnby50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUdwRCxNQUFNLE9BQU8sV0FBVztJQVd0Qjs7O09BR0c7SUFDSSxTQUFTLENBQUMsU0FBYztRQUM3QixJQUFJLENBQUMsU0FBUyxJQUFJLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxFQUFFO1lBQzNELE9BQU8sY0FBYyxDQUFDO1NBQ3ZCO1FBRUQsTUFBTSxJQUFJLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxFQUFFLENBQUM7UUFDekUsTUFBTSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRXhCLElBQUksSUFBSSxHQUFHLEdBQUcsRUFBRTtZQUNkLE9BQU8sZUFBZSxDQUFDO1NBQ3hCO1FBRUQsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEVBQUUsR0FBRyxHQUFHLEdBQUcsSUFBSSxFQUFFLEdBQUcsR0FBRyxXQUFXLENBQUMsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLEVBQUU7WUFDckcsTUFBTSxHQUFHLEdBQUcsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUNsQyxNQUFNLElBQUksR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUUvQyxJQUFJLElBQUksSUFBSSxDQUFDLEVBQUU7Z0JBQ2IsT0FBTyxJQUFJLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksSUFBSSxHQUFHLENBQUMsSUFBSSxNQUFNLENBQUM7YUFDNUQ7U0FDRjtRQUVELE9BQU8sVUFBVSxDQUFDO0lBQ3BCLENBQUM7O0FBcENjLG1CQUFPLEdBQVcsSUFBSSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0FBQ25ELGtCQUFNLEdBQVE7SUFDM0IsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtJQUM5QyxFQUFFLE1BQU0sRUFBRSxZQUFZLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ2pELEVBQUUsTUFBTSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUU7SUFDOUMsRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRTtJQUM3QyxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUUsSUFBSSxFQUFFLE9BQU8sRUFBRSxHQUFHLEVBQUUsRUFBRSxFQUFFO0lBQ2pELEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUU7Q0FDakQsQ0FBQzs7WUFWSCxJQUFJLFNBQUMsRUFBRSxJQUFJLEVBQUUsU0FBUyxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGlwZSwgUGlwZVRyYW5zZm9ybSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuQFBpcGUoeyBuYW1lOiAndGltZUFnbycgfSlcclxuZXhwb3J0IGNsYXNzIFRpbWVBZ29QaXBlIGltcGxlbWVudHMgUGlwZVRyYW5zZm9ybSB7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgWUVBUl9NUzogbnVtYmVyID0gMTAwMCAqIDYwICogNjAgKiAyNCAqIDcgKiA0ICogMTI7XHJcbiAgcHJpdmF0ZSBzdGF0aWMgTUFQUEVSOiBhbnkgPSBbXHJcbiAgICB7IHNpbmdsZTogJ2xhc3QgeWVhcicsIG1hbnk6ICd5ZWFycycsIGRpdjogMSB9LFxyXG4gICAgeyBzaW5nbGU6ICdsYXN0IG1vbnRoJywgbWFueTogJ21vbnRocycsIGRpdjogMTIgfSxcclxuICAgIHsgc2luZ2xlOiAnbGFzdCB3ZWVrJywgbWFueTogJ3dlZWtzJywgZGl2OiA0IH0sXHJcbiAgICB7IHNpbmdsZTogJ3llc3RlcmRheScsIG1hbnk6ICdkYXlzJywgZGl2OiA3IH0sXHJcbiAgICB7IHNpbmdsZTogJ2FuIGhvdXIgYWdvJywgbWFueTogJ2hvdXJzJywgZGl2OiAyNCB9LFxyXG4gICAgeyBzaW5nbGU6ICdqdXN0IG5vdycsIG1hbnk6ICdtaW51dGVzJywgZGl2OiA2MCB9LFxyXG4gIF07XHJcblxyXG4gIC8qKlxyXG4gICAqIEBwYXJhbSBpbnB1dERhdGU6IERhdGUgfCBNb21lbnQgLSBub3QgaW5jbHVkZWQgYXMgVHlwZVNjcmlwdCBpbnRlcmZhY2UsXHJcbiAgICogaW4gb3JkZXIgdG8ga2VlcCBgbmd4LXBpcGVzYCBcInB1cmVcIiBmcm9tIGRlcGVuZGVuY2llcyFcclxuICAgKi9cclxuICBwdWJsaWMgdHJhbnNmb3JtKGlucHV0RGF0ZTogYW55KTogc3RyaW5nIHtcclxuICAgIGlmICghaW5wdXREYXRlIHx8ICghaW5wdXREYXRlLmdldFRpbWUgJiYgIWlucHV0RGF0ZS50b0RhdGUpKSB7XHJcbiAgICAgIHJldHVybiAnSW52YWxpZCBkYXRlJztcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBwYXN0ID0gaW5wdXREYXRlLnRvRGF0ZSA/IGlucHV0RGF0ZS50b0RhdGUoKSA6IGlucHV0RGF0ZS5nZXRUaW1lKCk7XHJcbiAgICBjb25zdCBub3cgPSArbmV3IERhdGUoKTtcclxuXHJcbiAgICBpZiAocGFzdCA+IG5vdykge1xyXG4gICAgICByZXR1cm4gJ2luIHRoZSBmdXR1cmUnO1xyXG4gICAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwLCBsID0gVGltZUFnb1BpcGUuTUFQUEVSLmxlbmd0aCwgbXMgPSBub3cgLSBwYXN0LCBkaXYgPSBUaW1lQWdvUGlwZS5ZRUFSX01TOyBpIDwgbDsgKytpKSB7XHJcbiAgICAgIGNvbnN0IGVsbSA9IFRpbWVBZ29QaXBlLk1BUFBFUltpXTtcclxuICAgICAgY29uc3QgdW5pdCA9IE1hdGguZmxvb3IobXMgLyAoZGl2IC89IGVsbS5kaXYpKTtcclxuXHJcbiAgICAgIGlmICh1bml0ID49IDEpIHtcclxuICAgICAgICByZXR1cm4gdW5pdCA9PT0gMSA/IGVsbS5zaW5nbGUgOiBgJHt1bml0fSAke2VsbS5tYW55fSBhZ29gO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuICdqdXN0IG5vdyc7XHJcbiAgfVxyXG59XHJcbiJdfQ==